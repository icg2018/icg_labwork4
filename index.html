<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <title>Лабораторная работа 3</title>
    <link rel="stylesheet" href="https://www.x3dom.org/download/x3dom.css" />
    <script src="https://x3dom.org/download/dev/x3dom-full.debug.js"></script>
</head>
<body>
<h1>Perevalkina E.O. 4843</h1>
<X3D style="width:85%; height:85%; border:none;">
    <Scene>
        <Collision>
            <Transform DEF="Ball" rotation="0 1 0 2" translation="-12 -2.5 0">
                <Inline url="ball.x3d"></Inline>
            </Transform>

            <!--Кузов-->
            <transform rotation="0 0 1 1.57" translation="0 0 0">
                <Shape>
                    <Appearance>
                        <Material diffuseColor="blue"></Material>
                    </Appearance>
                    <Cylinder radius="1.4" height="7"></Cylinder>
                </Shape>
            </transform>

            <!--Кабина-->
            <transform translation="4 1 0">
                <Shape>
                    <Appearance>
                        <Material diffuseColor="blue"></Material>
                    </Appearance>
                    <Box size="2.5 5 3"></Box>
                </Shape>
            </transform>

            <!--Основание кузова-->
            <transform translation="0.5 -1.3 0">
                <Shape>
                    <Appearance>
                        <Material diffuseColor="blue"></Material>
                    </Appearance>
                    <Box size="9.5 0.5 3"></Box>
                </Shape>
            </transform>

            <!--Основание вагона-->
            <transform translation="8 -1.3 0">
                <Shape>
                    <Appearance>
                        <Material diffuseColor="blue"></Material>
                    </Appearance>
                    <Box size="4.4 0.5 4"></Box>
                </Shape>
            </transform>


            <!--Колёса-->
            <transform translation="-3.3 -2.49 1.4">
                <Shape DEF="Wheel">
                    <Appearance>
                        <Material diffuseColor="0.1 0.1 0.1"></Material>
                    </Appearance>
                    <Torus innerRadius="0.35" outerRadius="0.6"></Torus>
                </Shape>
            </transform>
            <transform translation="-1.4 -2.49 1.4">
                <Shape USE="Wheel">
                </Shape>
            </transform>
            <transform translation="0.5 -2.49 1.4">
                <Shape USE="Wheel">
                </Shape>
            </transform>
            <transform translation="2.4 -2.49 1.4">
                <Shape USE="Wheel">
                </Shape>
            </transform>
            <transform translation="4.3 -2.49 1.4">
                <Shape USE="Wheel">
                </Shape>
            </transform>
            <transform translation="6.9 -2.49 1.4">
                <Shape USE="Wheel">
                </Shape>
            </transform>
            <transform translation="9.3 -2.49 1.4">
                <Shape USE="Wheel">
                </Shape>
            </transform>

            <transform translation="-3.3 -2.49 -1.4">
                <Shape USE="Wheel">
                </Shape>
            </transform>
            <transform translation="-1.4 -2.49 -1.4">
                <Shape USE="Wheel">
                </Shape>
            </transform>
            <transform translation="0.5 -2.49 -1.4">
                <Shape USE="Wheel">
                </Shape>
            </transform>
            <transform translation="2.4 -2.49 -1.4">
                <Shape USE="Wheel">
                </Shape>
            </transform>
            <transform translation="4.3 -2.49 -1.4">
                <Shape USE="Wheel">
                </Shape>
            </transform>
            <transform translation="6.9 -2.49 -1.4">
                <Shape USE="Wheel">
                </Shape>
            </transform>
            <transform translation="9.3 -2.49 -1.4">
                <Shape USE="Wheel">
                </Shape>
            </transform>

            <!--Окна-->
            <transform translation="4 2 1.3">
                <Shape DEF="Window">
                    <Appearance>
                        <Material diffuseColor="white"></Material>
                    </Appearance>
                    <Sphere radius="0.7"></Sphere>
                </Shape>
            </transform>
            <transform translation="4 2 -1.3">
                <Shape USE="Window">
                </Shape>
            </transform>

            <!--Труба-->
            <transform translation="-2 2 0">
                <Shape>
                    <Appearance>
                        <Material diffuseColor="gray"></Material>
                    </Appearance>
                    <Cylinder radius="0.5" height="1.5"></Cylinder>
                </Shape>
            </transform>

            <!--Верхняя часть трубы-->
            <transform translation="-2 3 0">
                <Shape>
                    <Appearance>
                        <Material diffuseColor="gray"></Material>
                    </Appearance>
                    <Cone height="1" bottomradius="1" ></Cone>
                </Shape>
            </transform>

            <!--Текст-->
            <Anchor url="https://www.rzd.ru/" parameter="target='_self'">
                <transform translation="-3 6 0">
                    <Shape>
                        <Appearance>
                            <Material diffuseColor="red"></Material>
                        </Appearance>
                        <Text string="Поезд Санкт-Петербург - Кострома" solid="false" ></Text>
                    </Shape>
                </transform>
            </Anchor>

            <!--Крепление кузова и вагона-->
            <transform rotation="0 0 1 1.57" translation="6 0 0">
                <Shape>
                    <Appearance>
                        <Material diffuseColor="gray"></Material>
                    </Appearance>
                    <Cylinder radius="0.4" height="1.5"></Cylinder>
                </Shape>
            </transform>

            <!--Вагон-->
            <Transform translation="8 -1.05 0">
                <Shape>
                    <Appearance>
                        <Material emissiveColor='0 0 1'> </Material>
                    </Appearance>
                    <IndexedFaceSet ccw="true" colorPerVertex="true" convex="true" solid="false"
                                    coordIndex="0 4 7 3 -1 5 6 2 1 -1 4 5 6 7 -1 0 1 2 3 -1 6 7 3 2 -1 5 4 0 1 -1 " >
                        <Coordinate point="-2 0 2, 2 0 2, 2 0 -2, -2 0 -2, -2 4 2, 2 4 2, 2 4 -2, -2 4 -2"></Coordinate>
                    </IndexedFaceSet>
                </Shape>
            </Transform>

            <!--Дым-->
            <Shape>
                <Appearance>
                    <Material emissiveColor='0 0 0'> </Material>
                </Appearance>
                <PointSet>
                    <Coordinate point="-2 3.6 0,
          -2.05 3.7 0, -1.95 3.7 0,
          -2.1 3.8 0, -2 3.8 0, -1.9 3.8 0,
          -2.2 3.9 0, -2.1 3.9 0, -2 3.9 0, -1.9 3.9 0, -1.8 3.9 0,
          -2.3 4 0, -2.2 4 0, -2.1 4 0, -2 4 0, -1.9 4 0, -1.8 4 0, -1.7 4 0,
          -2.4 4.1 0, -2.3 4.1 0, -2.2 4.1 0, -2.1 4.1 0, -2 4.1 0, -1.9 4.1 0, -1.8 4.1 0, -1.7 4.1 0, -1.6 4.1 0,
          -2.5 4.2 0, -2.4 4.2 0, -2.3 4.2 0, -2.2 4.2 0, -2.1 4.2 0, -2 4.2 0, -1.9 4.2 0, -1.8 4.2 0, -1.7 4.2 0, -1.6 4.2 0, -1.5 4.2 0,
          -2.6 4.3 0, -2.5 4.3 0, -2.4 4.3 0, -2.3 4.3 0, -2.2 4.3 0, -2.1 4.3 0, -2 4.3 0, -1.9 4.3 0, -1.8 4.3 0, -1.7 4.3 0, -1.6 4.3 0, -1.5 4.3 0, -1.4 4.3 0,
          -2.7 4.4 0, -2.6 4.4 0, -2.5 4.4 0, -2.4 4.4 0, -2.3 4.4 0, -2.2 4.4 0, -2.1 4.4 0, -2 4.4 0, -1.9 4.4 0, -1.8 4.4 0, -1.7 4.4 0, -1.6 4.4 0, -1.5 4.4 0, -1.4 4.4 0, -1.3 4.4 0,
          -2.8 4.5 0, -2.7 4.5 0, -2.6 4.5 0, -2.5 4.5 0, -2.4 4.5 0, -2.3 4.5 0, -2.2 4.5 0, -2.1 4.5 0, -2 4.5 0, -1.9 4.5 0, -1.8 4.5 0, -1.7 4.5 0, -1.6 4.5 0, -1.5 4.5 0, -1.4 4.5 0, -1.3 4.5 0, -1.2 4.5 0 "></Coordinate>
                </PointSet>
            </Shape>

            <!--Индексированная линия-->
            <Transform translation="8 0.5 2">
                <Shape>
                    <IndexedLineSet coordIndex="0 1 3 2 0 –1"
                                    colorIndex="0 1 2 3 4 -1"
                                    colorPerVertex="true">
                        <Coordinate point="0 0 0, 1 1 0, -1 1 0, 0 2 0"></Coordinate>
                        <Color color="0 0 1, 0 1 0, 0 1 1, 1 0 0, 1 0 1"></Color>
                    </IndexedLineSet>
                </Shape>
            </Transform>

            <!--Индексированная линия-->
            <Transform translation="8 -0.8 2">
                <Shape>
                    <IndexedLineSet coordIndex="0 1 3 2 0 –1"
                                    colorIndex="0 1 2 3 4 -1"
                                    colorPerVertex="true">
                        <Coordinate point="0 0 0, 1 1 0, -1 1 0, 0 2 0"></Coordinate>
                        <Color color="0 0 1, 0 1 0, 0 1 1, 1 0 0, 1 0 1"></Color>
                    </IndexedLineSet>
                </Shape>
            </Transform>

            <!--Крыша вагона-->
            <Transform translation="8 2.9 0">
                <Shape>
                    <IndexedTriangleSet index="0 1 4 1 2 4 0 3 4 2 3 4" solid="false">
                        <Coordinate point="-2 0 2, 2 0 2, 2 0 -2, -2 0 -2, 0 2.5 0"></Coordinate>
                        <Color color="0 0 1, 0 1 0, 0 1 1, 1 0 0, 1 0 1"></Color>
                    </IndexedTriangleSet>
                </Shape>
            </Transform>

            <!--Крыша кузова-->
            <Transform translation="4 3.5 0">
                <Shape>
                    <IndexedTriangleStripSet index='0 1 4 2 3 -1 3 0 4 ' solid='false'>
                        <Coordinate point='-1.25 0 1.5, 1.25 0 1.5, 1.25 0 -1.5, -1.25 0 -1.5, 0 2 0'></Coordinate>
                        <Color color="0 1 0, 0 0 1, 0 1 1, 1 0 1, 1 0 0"></Color>
                    </IndexedTriangleStripSet>
                </Shape>
            </Transform>

            <!--Cтена-->
            <transform translation="-17.5 5 -1.5" rotation="1 0 0 1.57">
                <shape>
                    <appearance>
                        <ImageTexture url="Wall.jpg"> </ImageTexture>
                        <material diffusecolor='0 0 0'></material>
                    </appearance>
                    <box size=".1 16 18"></box>
                </shape>
            </transform>

            <!--Рельсы-->
            <transform translation="0 -3.7 -1.5">
                <Shape>
                    <Appearance>
                        <ImageTexture url="rels.jpg"> </ImageTexture>
                        <material diffusecolor='0 0 0'></material>
                    </Appearance>
                    <Box size="35 0.5 16"></Box>
                </Shape>
            </transform>

            <!-- Лицо -->
            <transform rotation="1 0 0 1.57">
                <transform translation ="-3.2 0 0" rotation="0 0 1 1.57">
                    <Shape>
                        <Appearance>
                            <ImageTexture url="Thomas.jpg"> </ImageTexture>
                        </Appearance>
                        <Cylinder radius="1.35" height="1"></Cylinder>
                    </Shape>
                </transform>
            </transform>
        </Collision>


        <!--Light and fog-->
        <Group DEF="Light">

            <!-- Свет от фары 1 -->
            <PointLight color='1,1,1'
                        intensity='0.5' location='-4, 0.1, 0.4'
                        radius='2' shadowFilterSize='2'
                        shadowIntensity='0'>
            </PointLight>

            <!-- Свет от фары 2 -->
            <PointLight color='1, 1, 1'
                        intensity='0.5' location='-4, 0.1, -0.4'
                        radius='2' shadowFilterSize='2'
                        shadowIntensity='0'>
            </PointLight>

            <!-- Направленный свет -->
            <DirectionalLight color='0.7, 0.5, 0.4' direction='-1, -1, 0'
                              intensity='1' shadowFilterSize='2'
                              shadowIntensity='0.5' >
            </DirectionalLight>

            <!-- Спот (фара 1) -->
            <SpotLight  beamWidth='1.5' color='0.5,0.4,0.3' cutOffAngle='1'
                        direction='-1,0,0'intensity='1'
                        location='-2,1,-1' radius='40'
                        shadowFilterSize='2' shadowIntensity='1'>
            </SpotLight>

            <!-- Спот (фара 2) -->
            <SpotLight  beamWidth='1.5' color='0.5,0.4,0.3' cutOffAngle='1'
                        direction='-1,0,0'intensity='1'
                        location='-2, 1, 1' radius='40'
                        shadowFilterSize='2' shadowIntensity='1'>
            </SpotLight>

            <!-- Туман -->
            <transform>
                <Fog color='(1,1,1)'
                     fogType='EXPONENTIAL'
                     visibilityRange='60' >
                </Fog>
            </transform>
        </Group>

        <!--Light-->

        <!-- Навигация и камера -->
        <NavigationInfo avatarSize= '[ 3, 5, 2 ]'explorationMode='all'
                        speed='5.0' transitionTime='1.0' transitionType='["LINEAR"]'
                        headlight='false' type="FLY" >
        </NavigationInfo>

        <Viewpoint position="-15 3 14"
                   orientation="0 -1 0 0.5"
                   fieldOfView="0.9"></Viewpoint>
        <Viewpoint position="-5 5 18"
                   orientation="0 -1 0 0"
                   fieldOfView="0.99"></Viewpoint>

        <transform rotation="1 0 0 0.5">
        <Viewpoint position="-6 5 -18"
                   orientation="0 1 0 3.14"
                   fieldOfView="0.99"></Viewpoint>
        </transform>


        <!--background-->
        <Background DEF='Fall'
                    skyAngle='0.8,1.3,1.5708'
                    skyColor='0.1 0.2 0.3,
                  0.2 0.3 0.4 ,
                  0.4 0.4 0.5'
                    groundAngle='0.4,
                     1.2,
                     1.5708'
                    groundColor='0.1 0.1 0.1,
                     0.1 0.2 0.15,
                     0.1 0.3 0.542,
                     0.2 0.4 0.8'/>

        <!-- Фоновая музыка -->
        <AudioClip url="TTM.mp3"  loop='true' enabled='false'></AudioClip>
    </Scene>
</X3D>
</body>
</html>

